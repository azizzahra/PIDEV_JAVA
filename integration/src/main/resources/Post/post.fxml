<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.geometry.Insets?>
<?import java.net.URL?>

<VBox xmlns="http://javafx.com/javafx/16"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="Controller.PostController"
      prefHeight="800.0"
      prefWidth="1200.0">

    <!-- Styles spécifiques à la page post -->
    <stylesheets>
        <URL value="@forum.css"/>
    </stylesheets>

    <!-- Include the navigation bar -->
    <fx:include source="../NavBar.fxml" />

    <AnchorPane VBox.vgrow="ALWAYS">
        <ScrollPane AnchorPane.topAnchor="0"
                    AnchorPane.bottomAnchor="0"
                    AnchorPane.leftAnchor="0"
                    AnchorPane.rightAnchor="0"
                    fitToWidth="true"
                    style="-fx-background: #F8F9FA;">

            <VBox spacing="0">

                <!-- En-tête -->
                <VBox alignment="CENTER" style="-fx-background-color: linear-gradient(to bottom, #2d4d2d, #1a331a);
                         -fx-padding: 40 20 20 20;
                         -fx-spacing: 15;">
                    <Label text="Forum d'Agriculture Intelligente 🌱"
                           style="-fx-text-fill: white;
                                  -fx-font-size: 28px;
                                  -fx-font-weight: bold;
                                    "/>

                    <Label text="Posez vos questions sur les technologies et innovations agricoles"
                           style="-fx-text-fill: #cce6cc;
                                  -fx-font-size: 16px;"/>

                    <HBox spacing="10" alignment="CENTER">
                        <Hyperlink text="Home"
                                   style="-fx-text-fill: #99cc99; -fx-underline: true;"/>
                        <Label text=">" style="-fx-text-fill: #99cc99;"/>
                        <Hyperlink text="Add Post"
                                   onAction="#openAjoutPostWindow"
                                   style="-fx-text-fill: white; -fx-underline: true;"/>
                    </HBox>
                </VBox>

                <!-- Contenu principal -->
                <HBox spacing="20" styleClass="general-padding" style="-fx-padding: 20;">

                    <!-- Section des posts -->
                    <VBox spacing="15" HBox.hgrow="ALWAYS">
                        <ScrollPane fx:id="scrollPane"
                                    fitToHeight="true"
                                    fitToWidth="true"
                                    style="-fx-background: transparent;">
                            <VBox fx:id="postListView" spacing="15" style="-fx-padding: 10;">
                                <!-- Les cartes de posts seront ajoutées ici dynamiquement -->
                            </VBox>
                        </ScrollPane>
                    </VBox>

                    <!-- Barre latérale -->
                    <VBox spacing="15" prefWidth="250">
                        <VBox fx:id="sidebarBoxGlobal"
                              spacing="15"
                              style="-fx-background-color: #edf7ed; /* vert très doux */
                         -fx-padding: 12;
                         -fx-background-radius: 10;
                         -fx-border-color: #cce6cc;
                         -fx-border-radius: 10;">
                            <!-- Catégories -->
                            <VBox styleClass="" spacing="10">
                                <Label text="📢 Catégories" styleClass="sidebar-title"/>
                                <Button fx:id="btnAllPosts" text="Tous les posts" styleClass="category-btn"/>
                                <Button fx:id="btnAgroTech" text="AgroTech" styleClass="category-btn"/>
                                <Button fx:id="btnMaterielAgricole" text="Matériel Agricole" styleClass="category-btn"/>
                                <Button fx:id="btnEnergiesVertes" text="Énergies Vertes" styleClass="category-btn"/>

                                <!-- Bouton de reconnaissance vocale -->
                                <HBox spacing="5" alignment="CENTER_LEFT" style="-fx-padding: 5 0;">
                                    <Button fx:id="btnVoiceRecognition"
                                            text="🎤 Recherche vocale"
                                            styleClass="voice-btn"/>
                                    <Label fx:id="lblVoiceStatus" text="" style="-fx-font-style: italic;"/>
                                </HBox>
                            </VBox>

                            <!-- Tendances -->
                            <VBox styleClass="" spacing="10">
                                <Label text="🔥 Tendances" styleClass="sidebar-title"/>
                                <Label fx:id="trendMostViewed" text="▶ Post le plus vu : Irrigation 4.0" styleClass="trend-item"/>
                                <Label fx:id="trendBestRated" text="▶ Meilleure note : Robots désherbeurs" styleClass="trend-item"/>
                            </VBox>
                        </VBox>
                        <VBox
                                spacing="15"
                                style="-fx-background-color: #edf7ed; /* vert très doux */
                         -fx-padding: 12;
                         -fx-background-radius: 10;
                         -fx-border-color: #cce6cc;
                         -fx-border-radius: 10;">
                            <Label text="🤖 Chatbot Agricole" styleClass="sidebar-title"/>

                            <!-- Zone d'affichage des messages -->
                            <ScrollPane fx:id="chatScrollPane"
                                        prefHeight="200"
                                        fitToWidth="true"
                                        style="-fx-background: transparent;">
                                <VBox fx:id="chatMessagesBox" spacing="5" style="-fx-padding: 5;"/>
                            </ScrollPane>

                            <!-- Zone de saisie et bouton d'envoi -->
                            <HBox spacing="5">
                                <TextField fx:id="chatInputField"
                                           promptText="Posez votre question..."
                                           HBox.hgrow="ALWAYS"/>
                                <Button fx:id="sendMessageBtn"
                                        text="✉️"
                                />
                            </HBox>

                            <!-- Exemples de questions -->
                            <VBox spacing="3" style="-fx-padding: 5 0;">
                                <Label text="Questions suggérées:"
                                       style="-fx-font-size: 12px; -fx-font-style: italic;"/>
                                <Hyperlink fx:id="suggestionLink1"
                                           text="Comment choisir un tracteur?"
                                />
                                <Hyperlink fx:id="suggestionLink2"
                                           text="Quels capteurs pour mon sol?"
                                />
                            </VBox>
                        </VBox>
                    </VBox>

                </HBox>

            </VBox>
        </ScrollPane>
    </AnchorPane>
</VBox>